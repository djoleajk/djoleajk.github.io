<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="Napredna Todo Lista aplikacija sa svim funkcionalnostima">
    <title>Todo Lista Pro</title>
    <link rel="stylesheet" href="Style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📝</text></svg>">
</head>
<body>
    <!-- Glavni kontejner -->
    <div class="container">
        <!-- Header sa kontrolama -->
        <header>
            <div class="header-top">
                <h1>📝 <span id="appTitle">Todo Lista Pro</span></h1>
                <div class="header-controls">
                    <button id="langToggle" class="icon-btn" title="Promeni jezik">🌐</button>
                    <button id="darkModeToggle" class="icon-btn" title="Dark Mode">🌙</button>
                    <button id="settingsBtn" class="icon-btn" title="Podešavanja">⚙️</button>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
            
            <!-- Statistika -->
            <div class="stats">
                <span class="stat-item">
                    <strong id="totalLabel">Ukupno:</strong> <span id="totalTasks">0</span>
                </span>
                <span class="stat-item">
                    <strong id="completedLabel">Završeno:</strong> <span id="completedTasks">0</span>
                </span>
                <span class="stat-item">
                    <strong id="activeLabel">Aktivno:</strong> <span id="activeTasks">0</span>
                </span>
                <span class="stat-item">
                    <strong id="streakLabel">Streak:</strong> <span id="streak">0</span> 🔥
                </span>
            </div>
        </header>

        <!-- Pomodoro Timer -->
        <div class="pomodoro-section" id="pomodoroSection">
            <div class="pomodoro-timer">
                <span id="timerDisplay">25:00</span>
                <div class="timer-controls">
                    <button id="startTimer" class="timer-btn">▶️</button>
                    <button id="pauseTimer" class="timer-btn">⏸️</button>
                    <button id="resetTimer" class="timer-btn">🔄</button>
                </div>
            </div>
            <select id="timerMode" class="timer-mode">
                <option value="25">Pomodoro (25 min)</option>
                <option value="5">Kratka pauza (5 min)</option>
                <option value="15">Duga pauza (15 min)</option>
            </select>
        </div>

        <!-- Search i Filter Kontrole -->
        <div class="controls-section">
            <div class="search-box">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="🔍 Pretraži zadatke..."
                    autocomplete="off"
                >
            </div>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all" id="filterAll">Svi</button>
                    <button class="filter-btn" data-filter="active" id="filterActive">Aktivni</button>
                    <button class="filter-btn" data-filter="completed" id="filterCompleted">Završeni</button>
                </div>
                
                <select id="categoryFilter" class="filter-select">
                    <option value="all">Sve kategorije</option>
                    <option value="work">💼 Posao</option>
                    <option value="personal">👤 Lično</option>
                    <option value="shopping">🛒 Kupovina</option>
                    <option value="health">💪 Zdravlje</option>
                    <option value="other">📌 Ostalo</option>
                </select>
                
                <select id="sortSelect" class="filter-select">
                    <option value="date-desc">Najnovije prvo</option>
                    <option value="date-asc">Najstarije prvo</option>
                    <option value="alpha-asc">A-Z</option>
                    <option value="alpha-desc">Z-A</option>
                    <option value="priority">Po prioritetu</option>
                    <option value="duedate">Po roku</option>
                </select>
            </div>
        </div>

        <!-- Dodavanje zadatka -->
        <div class="add-task-section">
            <div class="task-input-group">
                <input 
                    type="text" 
                    id="taskInput" 
                    placeholder="Unesite novi zadatak..."
                    autocomplete="off"
                >
                <textarea 
                    id="taskNote" 
                    placeholder="Napomena (opciono)..."
                    rows="2"
                    style="display: none;"
                ></textarea>
            </div>
            
            <div class="task-options">
                <select id="prioritySelect" class="option-select">
                    <option value="low">🟢 Niska</option>
                    <option value="medium">🟡 Srednja</option>
                    <option value="high">🔴 Visoka</option>
                </select>
                
                <select id="categorySelect" class="option-select">
                    <option value="work">💼 Posao</option>
                    <option value="personal">👤 Lično</option>
                    <option value="shopping">🛒 Kupovina</option>
                    <option value="health">💪 Zdravlje</option>
                    <option value="other">📌 Ostalo</option>
                </select>
                
                <input type="date" id="dueDateInput" class="option-select">
                
                <button id="toggleNoteBtn" class="icon-btn-sm" title="Dodaj napomenu">📝</button>
                <button id="addTaskBtn" class="btn btn-primary">➕ <span id="addBtnText">Dodaj</span></button>
            </div>
        </div>

        <!-- Bulk akcije -->
        <div class="bulk-actions">
            <button id="markAllComplete" class="bulk-btn">✅ <span id="markAllText">Označi sve</span></button>
            <button id="deleteCompleted" class="bulk-btn">🗑️ <span id="deleteCompletedText">Obriši završene</span></button>
            <button id="deleteAll" class="bulk-btn bulk-danger">❌ <span id="deleteAllText">Obriši sve</span></button>
            <button id="exportTasks" class="bulk-btn">💾 <span id="exportText">Izvezi</span></button>
            <button id="importTasks" class="bulk-btn">📥 <span id="importText">Uvezi</span></button>
            <input type="file" id="importFile" accept=".json,.csv" style="display: none;">
        </div>

        <!-- Lista zadataka -->
        <div class="tasks-container" id="tasksContainer">
            <ul id="taskList"></ul>
        </div>

        <!-- Statistics Toggle -->
        <button id="showStatsBtn" class="show-stats-btn">📊 <span id="showStatsText">Prikaži statistiku</span></button>
    </div>

    <!-- Modal za izmenu zadatka -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2>✏️ <span id="editModalTitle">Izmeni Zadatak</span></h2>
            <input 
                type="text" 
                id="editTaskInput" 
                placeholder="Unesite novi tekst..."
                autocomplete="off"
            >
            <textarea 
                id="editTaskNote" 
                placeholder="Napomena..."
                rows="3"
            ></textarea>
            
            <div class="edit-options">
                <select id="editPriority" class="option-select">
                    <option value="low">🟢 Niska</option>
                    <option value="medium">🟡 Srednja</option>
                    <option value="high">🔴 Visoka</option>
                </select>
                
                <select id="editCategory" class="option-select">
                    <option value="work">💼 Posao</option>
                    <option value="personal">👤 Lično</option>
                    <option value="shopping">🛒 Kupovina</option>
                    <option value="health">💪 Zdravlje</option>
                    <option value="other">📌 Ostalo</option>
                </select>
                
                <input type="date" id="editDueDate" class="option-select">
            </div>
            
            <div class="modal-buttons">
                <button id="saveEditBtn" class="btn btn-primary">💾 <span id="saveBtnText">Sačuvaj</span></button>
                <button id="cancelEditBtn" class="btn btn-secondary">❌ <span id="cancelBtnText">Otkaži</span></button>
            </div>
        </div>
    </div>

    <!-- Modal za statistiku -->
    <div id="statsModal" class="modal">
        <div class="modal-content modal-large">
            <h2>📊 <span id="statsModalTitle">Statistika i Analytics</span></h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalCreated">0</div>
                    <div class="stat-label" id="totalCreatedLabel">Ukupno kreirano</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCompleted">0</div>
                    <div class="stat-label" id="totalCompletedLabel">Ukupno završeno</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="completionRate">0%</div>
                    <div class="stat-label" id="completionRateLabel">Stopa završavanja</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgPerDay">0</div>
                    <div class="stat-label" id="avgPerDayLabel">Prosek dnevno</div>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="statsChart"></canvas>
            </div>
            
            <div class="modal-buttons">
                <button id="closeStatsBtn" class="btn btn-secondary">❌ <span id="closeStatsBtnText">Zatvori</span></button>
            </div>
        </div>
    </div>

    <!-- Modal za subtasks -->
    <div id="subtasksModal" class="modal">
        <div class="modal-content">
            <h2>📋 <span id="subtasksModalTitle">Podzadaci</span></h2>
            <div id="subtasksList"></div>
            <div class="add-subtask">
                <input type="text" id="subtaskInput" placeholder="Dodaj podzadatak...">
                <button id="addSubtaskBtn" class="btn btn-primary">➕</button>
            </div>
            <div class="modal-buttons">
                <button id="closeSubtasksBtn" class="btn btn-secondary">❌ <span id="closeSubtasksBtnText">Zatvori</span></button>
            </div>
        </div>
    </div>

    <!-- Toast notifikacija -->
    <div id="toast" class="toast">
        <span id="toastMessage"></span>
        <button id="undoBtn" class="undo-btn">↶ <span id="undoText">Vrati</span></button>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <h2>⚙️ <span id="settingsModalTitle">Podešavanja</span></h2>
            
            <div class="settings-section">
                <h3>🎨 Tema</h3>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="darkModeCheckbox"> Dark Mode
                    </label>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>🌐 Jezik</h3>
                <div class="setting-item">
                    <select id="languageSelect" class="option-select">
                        <option value="sr">🇷🇸 Srpski</option>
                        <option value="en">🇬🇧 English</option>
                    </select>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>⏱️ Pomodoro</h3>
                <div class="setting-item">
                    <label>Rad (minuti):</label>
                    <input type="number" id="pomodoroWork" class="option-select" value="25" min="1" max="60">
                </div>
                <div class="setting-item">
                    <label>Kratka pauza (minuti):</label>
                    <input type="number" id="pomodoroShortBreak" class="option-select" value="5" min="1" max="30">
                </div>
                <div class="setting-item">
                    <label>Duga pauza (minuti):</label>
                    <input type="number" id="pomodoroLongBreak" class="option-select" value="15" min="1" max="60">
                </div>
            </div>
            
            <div class="settings-section">
                <h3>🔔 Notifikacije</h3>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="notificationsCheckbox"> Omogući notifikacije
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="soundCheckbox"> Omogući zvuk
                    </label>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>📊 Podaci</h3>
                <div class="setting-item">
                    <button class="btn btn-secondary" id="clearAllDataBtn">🗑️ Obriši sve podatke</button>
                </div>
                <div class="setting-item">
                    <small style="color: var(--text-secondary);">
                        Veličina podataka: <span id="dataSize">0 KB</span>
                    </small>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button id="saveSettingsBtn" class="btn btn-primary">💾 <span id="saveSettingsBtnText">Sačuvaj</span></button>
                <button id="closeSettingsBtn" class="btn btn-secondary">❌ <span id="closeSettingsBtnText">Zatvori</span></button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
