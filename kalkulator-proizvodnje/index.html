<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω–¥—É—Å—Ç—Ä–∏—ò—Å–∫–∏ –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä –ü—Ä–æ–∏–∑–≤–æ–¥—ö–µ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä">
</head>
<body>
    <div class="container menu-container">
        <h1>–ò–Ω–¥—É—Å—Ç—Ä–∏—ò—Å–∫–∏ –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</h1>
        <p class="subtitle">–ò–∑–∞–±–µ—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—ò—É –∑–∞ –∫–∞–ªkul–∞—Ü–∏—ò—É –≤—Ä–µ–º–µ–Ω–∞</p>
        
        <div class="dedication-banner">
            <div class="gift-text">
                –ü–æ–∫–ª–æ–Ω –∫–æ–ª–µ–≥–∞–º–∞ <strong>–ö–æ–≤–∞—á–∫–æ–≥ –¶–µ–Ω—Ç—Ä–∞</strong>
            </div>
        </div>
        
        <div class="current-time">
            <div class="time-label">
                <span class="sync-badge" title="–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–æ–≤–∞–Ω–æ —Å–∞ –∞—Ç–æ–º—Å–∫–∏–º —Å–∞—Ç–æ–º">üîÑ –ê—Ç–æ–º—Å–∫–∏ —Å–∞—Ç</span>
            </div>
            <div id="currentTime" class="time-display">--:--:--</div>
            <div id="currentDate" class="date-display"></div>
        </div>

        <!-- Istorija i notifikacije dugmiƒái -->
        <div class="quick-actions">
            <a href="history.html" class="action-btn history-btn" title="–ü—Ä–µ–≥–ª–µ–¥ –∏—Å—Ç–æ—Ä–∏—ò–µ –∫–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞">
                <span class="action-icon">üìä</span>
                <span class="action-text">–ò—Å—Ç–æ—Ä–∏—ò–∞</span>
                <span id="historyCount" class="badge">0</span>
            </a>
            <button id="notificationToggle" class="action-btn notification-btn" title="–û–º–æ–≥—É—õ–∏/–æ–Ω–µ–º–æ–≥—É—õ–∏ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—ò–µ">
                <span class="action-icon">üîî</span>
                <span class="action-text">–ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—ò–µ</span>
            </button>
        </div>

        <div class="menu-grid">
            <a href="ubadanje.html" class="menu-card">
                <div class="menu-icon">üî®</div>
                <div class="menu-title">–£–±–∞–¥–∞—ö–µ</div>
                <div class="menu-description">–ö–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞ –≤—Ä–µ–º–µ–Ω–∞ –∑–∞ —É–±–∞–¥–∞—ö–µ</div>
            </a>

            <a href="zatvaranje-mine.html" class="menu-card">
                <div class="menu-icon">üî©</div>
                <div class="menu-title">–ó–∞—Ç–≤–∞—Ä–∞—ö–µ –ú–∏–Ω–µ</div>
                <div class="menu-description">–ö–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞ –≤—Ä–µ–º–µ–Ω–∞ –∑–∞ –∑–∞—Ç–≤–∞—Ä–∞—ö–µ</div>
            </a>

            <a href="peskarenje.html" class="menu-card special">
                <div class="menu-icon">üí®</div>
                <div class="menu-title">–ü–µ—Å–∫–∞—Ä–µ—ö–µ</div>
                <div class="menu-description">2 –º–∏–Ω–µ –æ–¥—ò–µ–¥–Ω–æ–º</div>
            </a>

            <a href="robot.html" class="menu-card">
                <div class="menu-icon">ü§ñ</div>
                <div class="menu-title">–ü—Ä–µ—Å–∞ "–†–æ–±–æ—Ç"</div>
                <div class="menu-description">–ö–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞ –∑–∞ –†–æ–±–æ—Ç –ø—Ä–µ—Å—É</div>
            </a>

            <a href="italijanka.html" class="menu-card">
                <div class="menu-icon">üáÆüáπ</div>
                <div class="menu-title">–ü—Ä–µ—Å–∞ "–ò—Ç–∞–ª–∏—ò–∞–Ω–∫–∞"</div>
                <div class="menu-description">–ö–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞ –∑–∞ –ò—Ç–∞–ª–∏—ò–∞–Ω–∫—É</div>
            </a>

            <a href="bem.html" class="menu-card">
                <div class="menu-icon">‚öôÔ∏è</div>
                <div class="menu-title">–ü—Ä–µ—Å–∞ "–ë–ï–ú"</div>
                <div class="menu-description">–ö–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞ –∑–∞ –ë–ï–ú –ø—Ä–µ—Å—É</div>
            </a>
        </div>

        <div class="weather-widget-container">
            <div id="weatherWidget"></div>
        </div>
        
        <div class="author-footer">
            <p>¬© 2025 ƒêorƒëe ≈Ωivanoviƒá</p>
        </div>
    </div>

    <script src="time-sync.js"></script>
    <script src="weather.js"></script>
    <script src="history-manager.js"></script>
    <script src="notifications.js"></script>
    <script>
        // Pokreni sat sa prikazom datuma
        atomicClock.startClock('currentTime', { 
            showDate: true, 
            dateElementId: 'currentDate' 
        });

        // A≈æuriraj broj kalkulacija u istoriji
        function updateHistoryCount() {
            const history = historyManager.getHistory();
            const countElement = document.getElementById('historyCount');
            if (countElement) {
                countElement.textContent = history.length;
                countElement.style.display = history.length > 0 ? 'inline-block' : 'none';
            }
        }

        // Toggle notifikacija
        document.getElementById('notificationToggle').addEventListener('click', async () => {
            if (notificationManager.areNotificationsEnabled()) {
                // Veƒá omoguƒáeno, prika≈æi poruku
                alert('–ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—ò–µ —Å—É –≤–µ—õ –æ–º–æ–≥—É—õ–µ–Ω–µ! ‚úì\n\n–ü—Ä–∏–º–∏—õ–µ—Ç–µ –æ–±–∞–≤–µ—à—Ç–µ—ö–∞ –∫–∞–¥–∞ —Å–µ –∫–∞–ª–∫—É–ª–∞—Ü–∏—ò–∞ –∑–∞–≤—Ä—à–∏.');
            } else {
                // Tra≈æi dozvolu
                const granted = await notificationManager.requestPermission();
                if (granted) {
                    alert('–ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—ò–µ –æ–º–æ–≥—É—õ–µ–Ω–µ! ‚úì');
                } else {
                    alert('–ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—ò–µ –Ω–∏—Å—É –¥–æ–∑–≤–æ—ô–µ–Ω–µ.\n\n–£–∫–æ–ª–∏–∫–æ –∂–µ–ª–∏—Ç–µ –¥–∞ –∏—Ö –æ–º–æ–≥—É—õ–∏—Ç–µ, –∏–¥–∏—Ç–µ —É –ø–æ–¥–µ—à–∞–≤–∞—ö–∞ –ø—Ä–µ–≥–ª–µ–¥–∞—á–∞ –∏ –¥–æ–∑–≤–æ–ª–∏—Ç–µ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—ò–µ –∑–∞ –æ–≤—É —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                }
            }
        });

        // Inicijalno a≈æuriranje
        updateHistoryCount();

        // Registruj Service Worker za PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('‚úì Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤–∞–Ω:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker –≥—Ä–µ—à–∫–∞:', error);
                    });
            });
        }
    </script>
</body>
</html>