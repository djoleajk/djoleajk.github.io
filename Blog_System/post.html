<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post - Blog Sistem</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html" class="logo">BlogSistem</a>
            </div>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html">Početna</a></li>
                <li><a href="#" id="myPostsLink" class="hidden">Moji postovi</a></li>
                <li><a href="admin.html" id="adminLink" class="hidden">Admin panel</a></li>
                <li>
                    <div id="authButtons">
                        <button class="btn btn-outline" id="loginBtn">Prijavi se</button>
                        <button class="btn btn-primary" id="registerBtn">Registruj se</button>
                    </div>
                    <div id="userMenu" class="hidden">
                        <span id="userGreeting"></span>
                        <button class="btn btn-outline" id="logoutBtn">Odjavi se</button>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <main class="container main-content" role="main">
        <article id="postArticle" class="post-single" role="article">
            <div id="loadingSpinner" class="spinner" role="status" aria-live="polite">
                <span class="sr-only">Učitavanje...</span>
            </div>
            <!-- Post content will be dynamically loaded here -->
        </article>

        <!-- Post Actions (for author/editor/admin) -->
        <div id="postActions" class="post-actions hidden">
            <button class="btn btn-outline" id="editPostBtn">Izmeni post</button>
            <button class="btn btn-danger" id="deletePostBtn">Obriši post</button>
        </div>

        <!-- Comments Section -->
        <section class="comments-section" aria-label="Komentari">
            <h2>Komentari (<span id="commentsCount">0</span>)</h2>
            
            <!-- Comment Form -->
            <div id="commentFormContainer" class="comment-form-container hidden">
                <form id="commentForm">
                    <div class="form-group">
                        <label for="commentContent">Dodaj komentar</label>
                        <textarea id="commentContent" rows="4" required minlength="3" maxlength="1000" 
                                  placeholder="Napiši svoj komentar..." aria-required="true"></textarea>
                        <small class="form-text">Maksimalno 1000 karaktera</small>
                    </div>
                    <button type="submit" class="btn btn-primary">Objavi komentar</button>
                </form>
            </div>

            <div id="commentLoginPrompt" class="comment-login-prompt">
                <p>Morate biti prijavljeni da biste komentarisali.</p>
                <button class="btn btn-primary" id="loginPromptBtn">Prijavi se</button>
            </div>

            <!-- Comments List -->
            <div id="commentsList" class="comments-list">
                <!-- Comments will be dynamically loaded here -->
            </div>
        </section>

        <!-- Related Posts -->
        <section class="related-posts" aria-label="Slični postovi">
            <h2>Slični postovi</h2>
            <div id="relatedPosts" class="posts-grid">
                <!-- Related posts will be dynamically loaded here -->
            </div>
        </section>
    </main>

    <!-- Modal for Login -->
    <div id="loginModal" class="modal" role="dialog" aria-labelledby="loginTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="loginTitle">Prijavi se</h2>
                <button class="modal-close" aria-label="Zatvori">&times;</button>
            </div>
            <form id="loginForm" novalidate>
                <div class="form-group">
                    <label for="loginEmail">Email adresa</label>
                    <input type="email" id="loginEmail" required aria-required="true">
                    <span class="error-message" role="alert"></span>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Lozinka</label>
                    <input type="password" id="loginPassword" required aria-required="true">
                    <span class="error-message" role="alert"></span>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Prijavi se</button>
            </form>
        </div>
    </div>

    <!-- Modal for Edit Comment -->
    <div id="editCommentModal" class="modal" role="dialog" aria-labelledby="editCommentTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="editCommentTitle">Izmeni komentar</h2>
                <button class="modal-close" aria-label="Zatvori">&times;</button>
            </div>
            <form id="editCommentForm">
                <input type="hidden" id="editCommentId">
                <div class="form-group">
                    <label for="editCommentContent">Sadržaj</label>
                    <textarea id="editCommentContent" rows="4" required minlength="3" maxlength="1000"></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Sačuvaj izmene</button>
            </form>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Blog Sistem. Sva prava zadržana.</p>
        </div>
    </footer>

    <script type="module" src="js/post.js"></script>
</body>
</html>

